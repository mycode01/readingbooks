# 2장 관리

1장과는 약간 달리 ‘그렇다면 그 정리를 언제 어떻게 해야하는것인가’ 에 대해서 제시함.

약간 뻔하고 쓸데없는 내용이 있는거같음. 혹은, 한국이랑은 좀 안맞다거나.

### 16 코드 정리 구분

PR이 너무 길면 팀원들이 피곤하다. 너무 한번에 정리를 많이 하려고 하지마라.

작업자의 직관에 달린 문제지만, 너무 잘게도 안돼고 너무 크게도 안됀다. 

너무 잘게 쪼갠 PR은 무시당할 확률을 키우고, 너무 큰 PR은 피곤하고, 뒤 이어지는 PR도 느려진다.

개인적으로는 너무 잘게 쪼갠 PR은 문맥의 파악을 힘들게 할수 있다고 생각하는데, 잘 읽어보면 **코드 정리와 동작 변경은 분리해야한다** 라고 설명하고 있음.

예를들어, ‘인간은 돼지다’ 라는 문장은 바로 틀렸음을 알수 있다.(물론 PR이 크면 알기어려운건 같지만)

하지만 ‘인간은 모두 죽는다’, ‘돼지는 모두 죽는다’, ‘따라서 인간은 돼지다’ 처럼 쪼갠 PR은 은근히 알기 어렵거나 방점을 찍기 전까지 알기 힘들수 있다.

이것은 정리와 구조변경을 함께 처리한 PR때문에 벌어지는 일이고, 2장에서는 이를 분리하여 보게하고, 어떻게 해야하는지 알려준다. 다만, 정리와 변경을 분간하지 못한다면 그냥 하던대로 하는게 나을거같다.

### 17 연쇄적인 정리

1장에서 알려준 코드 정리 유형에 따라오는 긍정적인 효과를 나열함.

이걸 왜 굳이 따로 만든건지 잘 모르겠음.

이런 정리를 통해 다음에 올 변경이 쉬울수 있다 를 먼저 설명하고 싶었던거같음.

### 18 코드 정리의 일괄 처리량

16에서 코드정리와 동작변경을 분리해야함을 이야기했음. 

그렇다면 정리를 한꺼번에 할것인지 아니면 동작변경과 교차적으로 해야할지 선택해야함을 설명함.

뻔한 이야기를 함. 

코드정리가 크다면 지연기간이 길어지고, 다른 작업자와의 충돌가능성이 커짐. 충돌이 일어나면 머지 작업이 딸려와서 추가적인 비용발생이 일어남.

정리가 크다면 실수로 동작 변경을 할 가능성도 커짐

코드 정리를 하다보면 딸려있는 코드를 같이 수정하며 쓸데없이 정리작업이 커질수 있음. 

켄트 벡은 코드 정리 갯수를 늘리고, 팀간의 신뢰를 늘려 검토에 드는 시간을 줄일수 있다고 함.

반박하기에 시간이 아까울정도의 이상론 

### 19 리듬

다시 코드 정리를 통한 잇점을 설명함.

코드정리 규모가 작다면 다음 구조변경은 작고 더 편해질것이다.

동작변경도 한 소스내에서 뭉쳐 나타나는 경향이 있다고 함. 그리고 이것을 우리가 정리했을때, 변경도 충분히 그 이득을 볼수 있을것이다. 라는 주장을 함.

그런데 동작 변경은 언제나 어떤 방향으로 일어날지 예측밖에 할수 없는데, 정리를 했을때 그 정리의 방향이 항상 동작변경에 유리한 방향일지는 장담할수 없다고 생각함.

### 20 얽힘 풀기

코드정리를 하다보니 실수로 변경과 같이 진행을 해버렸을때 할수 있는 두가지 선택점을 제시함.

코드 정리와 변경을 별도의 PR로 쪼개어 여러번 커밋을 함.

작업을 버리고 다시 정리를 똑바로 함. 

켄트 벡은 작업을 버리고 새로 하기를 바라는데, 그 이유가 솔직히 와닿지는 않는다.

다시 구현하면서 새로운 것을 발견할수있다. 동일한 동작변경을 하면서도 더 많은 가치를 끌어낸다.

난 이런 소리보다는 같은 작업을 다시한다면 그만큼 빠르게 처리할수 있다는 리팩토링 관련 책에서 본 주장을 믿고 새로 하련다.

### 21 코드 정리 시점

그렇다면 이런 코드 정리는 언제 이루어져야하는가?

몇가지 선택지가 있는데 선택지를 고르라기보다는 작업을 해야하는 유형에 따라 정리방법이 정해진다고 주장하는거 같다.

안한다 

잘 돌고있고, 앞으로도 변경이 없는 비즈니스일때

나중에 한다 

작업량이 많은데 변경이 나중이거나 멀리있을때, 즉, 이득을 많이 보기 힘들때

동작 변경 후에 정리한다

당장 동작 변경이 필요할때 그리고 동작 변경후에 맥락을 잊어버려 정리가 늦어지거나 감당이 안될때

코드 정리 후에 동작 변경을 한다

코드 정리후 즉각적으로 이득을 볼수있을때, 문맥 파악이 빠르게 끝날수 있을때.